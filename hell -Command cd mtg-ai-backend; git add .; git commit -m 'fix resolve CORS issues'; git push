warning: in the working copy of 'README.md', LF will be replaced by CRLF the next time Git touches it
[1mdiff --git a/README.md b/README.md[m
[1mindex e455351..69baadb 100644[m
[1m--- a/README.md[m
[1m+++ b/README.md[m
[36m@@ -27,11 +27,13 @@[m [mMTG-AIsearch/[m
 ## ğŸ› ï¸ Tech Stack[m
 [m
 ### Frontend[m
[32m+[m
 - HTML5 + CSS3 + JavaScript[m
 - Responsive design[m
 - Dark theme UI[m
 [m
 ### Backend[m
[32m+[m
 - Python FastAPI[m
 - Scryfall API integration[m
 - OpenAI/AIHubMix API support[m
[36m@@ -39,12 +41,14 @@[m [mMTG-AIsearch/[m
 ## ğŸ”§ Local Development[m
 [m
 ### Frontend Development[m
[32m+[m
 ```bash[m
 cd mtg-ai-frontend[m
 # Frontend is static files, just open build/index.html[m
 ```[m
 [m
 ### Backend Development[m
[32m+[m
 ```bash[m
 cd mtg-ai-backend[m
 pip install -r requirements.txt[m
[36m@@ -54,12 +58,14 @@[m [muvicorn app.main:app --reload[m
 ## ğŸ“– Usage Examples[m
 [m
 ### Search Examples[m
[32m+[m
 - "green creatures" â†’ Search for green creature cards[m
 - "red burn spells" â†’ Search for red damage spells[m
 - "esper control" â†’ Search for Esper color control cards[m
 - "creatures with power 4+" â†’ Search for creatures with power 4 or greater[m
 [m
 ### Sorting Features[m
[32m+[m
 - **By Name**: Alphabetical order[m
 - **By Rarity**: Mythic â†’ Rare â†’ Uncommon â†’ Common[m
 - **By Mana Value**: Sort by mana cost[m
[1mdiff --git a/backend/__init__.py b/backend/__init__.py[m
[1mdeleted file mode 100644[m
[1mindex 5215f95..0000000[m
[1m--- a/backend/__init__.py[m
[1m+++ /dev/null[m
[36m@@ -1,4 +0,0 @@[m
[31m-ï»¿# Initialize the backend package[m
[31m-from .main import app[m
[31m-[m
[31m-__all__ = ["app"][m
[1mdiff --git a/backend/main.py b/backend/main.py[m
[1mdeleted file mode 100644[m
[1mindex 398d2d8..0000000[m
[1m--- a/backend/main.py[m
[1m+++ /dev/null[m
[36m@@ -1,1193 +0,0 @@[m
[31m-ï»¿from fastapi import FastAPI, HTTPException[m
[31m-from fastapi.middleware.cors import CORSMiddleware[m
[31m-from pydantic import BaseModel[m
[31m-import httpx[m
[31m-import os[m
[31m-import asyncio[m
[31m-import random[m
[31m-from typing import List, Optional[m
[31m-from .preprocessor import preprocess_mtg_query, mtg_preprocessor[m
[31m-[m
[31m-app = FastAPI(title="MTG AI Search API", version="1.0.0")[m
[31m-[m
[31m-# CORS configuration[m
[31m-app.add_middleware([m
[31m-    CORSMiddleware,[m
[31m-    allow_origins=["*"],[m
[31m-    allow_credentials=True,[m
[31m-    allow_methods=["*"],[m
[31m-    allow_headers=["*"],[m
[31m-)[m
[31m-[m
[31m-# æ•°æ®æ¨¡å‹[m
[31m-class SearchRequest(BaseModel):[m
[31m-    query: str[m
[31m-    language: str = "zh"[m
[31m-    api_key: Optional[str] = None[m
[31m-    model: Optional[str] = None[m
[31m-    sort: Optional[str] = "name"  # æ’åºæ–¹å¼ï¼šname, set, released, rarity, color, cmc, power, toughness, edhrec, artist[m
[31m-    order: Optional[str] = "asc"  # æ’åºé¡ºåºï¼šasc, desc[m
[31m-[m
[31m-class Card(BaseModel):[m
[31m-    name: str[m
[31m-    mana_cost: Optional[str] = None[m
[31m-    type_line: str[m
[31m-    oracle_text: str[m
[31m-    image_uris: Optional[dict] = None[m
[31m-    scryfall_uri: str[m
[31m-    rarity: Optional[str] = None[m
[31m-[m
[31m-class SearchResponse(BaseModel):[m
[31m-    cards: List[Card][m
[31m-    scryfall_query: str[m
[31m-    total_cards: int[m
[31m-    api_provider: Optional[str] = None[m
[31m-[m
[31m-class EdhrecService:[m
[31m-    """EDHREC APIæœåŠ¡"""[m
[31m-    [m
[31m-    def __init__(self):[m
[31m-        self.base_url = "https://json.edhrec.com"[m
[31m-        self.headers = {[m
[31m-            "User-Agent": "MTG-AI-Search/1.0",[m
[31m-            "Accept": "application/json"[m
[31m-        }[m
[31m-    [m
[31m-    async def get_card_rating(self, card_name: str) -> Optional[float]:[m
[31m-        """è·å–å¡ç‰Œçš„EDHRECè¯„åˆ†"""[m
[31m-        try:[m
[31m-            # ç®€åŒ–å®ç°ï¼šæš‚æ—¶è¿”å›éšæœºè¯„åˆ†ï¼Œé¿å…APIè°ƒç”¨é”™è¯¯[m
[31m-            # åœ¨å®é™…éƒ¨ç½²ä¸­ï¼Œè¿™é‡Œåº”è¯¥è°ƒç”¨çœŸæ­£çš„EDHREC API[m
[31m-            import random[m
[31m-            return random.uniform(0.0, 10.0)[m
[31m-                [m
[31m-        except Exception as e:[m
[31m-            print(f"EDHREC API error for {card_name}: {e}")[m
[31m-            return 0.0[m
[31m-    [m
[31m-    async def get_cards_ratings(self, card_names: List[str]) -> dict:[m
[31m-        """æ‰¹é‡è·å–å¡ç‰Œè¯„åˆ†"""[m
[31m-        ratings = {}[m
[31m-        for card_name in card_names:[m
[31m-            rating = await self.get_card_rating(card_name)[m
[31m-            ratings[card_name] = rating or 0.0[m
[31m-        return ratings[m
[31m-[m
[31m-@app.get("/")[m
[31m-async def root():[m
[31m-    return {"message": "MTG AI Search API is running"}[m
[31m-[m
[31m-@app.get("/health")[m
[31m-async def health_check():[m
[31m-    return {"status": "healthy"}[m
[31m-[m
[31m-@app.get("/api/examples")[m
[31m-async def get_search_examples():[m
[31m-    """è·å–æœç´¢ç¤ºä¾‹"""[m
[31m-    examples = {[m
[31m-        "zh": [[m
[31m-            "ç»¿è‰²ç”Ÿç‰©",[m
[31m-            "çº¢è‰²ç¬é—´", [m
[31m-            "åŠ›é‡å¤§äº4çš„ç”Ÿç‰©",[m
[31m-            "ç¥è¯ç¨€æœ‰åº¦",[m
[31m-            "è‰¾æ–¯æ³¢æ§åˆ¶",[m
[31m-            "2/2ç†Š",[m
[31m-            "æ¸…åœºæ³•æœ¯"[m
[31m-        ],[m
[31m-        "en": [[m
[31m-            "green creatures",[m
[31m-            "red instants",[m
[31m-            "creatures with power 4+",[m
[31m-            "mythic rarity",[m
[31m-            "esper control",[m
[31m-            "2/2 bears",[m
[31m-            "board wipes"[m
[31m-        ][m
[31m-    }[m
[31m-    return examples[m
[31m-[m
[31m-@app.get("/api/models")[m
[31m-async def get_models():[m
[31m-    """è·å–å¯ç”¨çš„æ¨¡å‹åˆ—è¡¨"""[m
[31m-    try:[m
[31m-        # å°è¯•ä»ç¯å¢ƒå˜é‡è·å– Aihubmix API Key[m
[31m-        aihubmix_api_key = os.getenv("AIHUBMIX_API_KEY")[m
[31m-        [m
[31m-        if aihubmix_api_key:[m
[31m-            # å¦‚æœæœ‰ API Keyï¼Œè°ƒç”¨ Aihubmix API è·å–çœŸå®æ¨¡å‹åˆ—è¡¨[m
[31m-            async with httpx.AsyncClient() as client:[m
[31m-                response = await client.get([m
[31m-                    "https://aihubmix.com/v1/models",[m
[31m-                    headers={[m
[31m-                        "Authorization": f"Bearer {aihubmix_api_key}",[m
[31m-                        "Content-Type": "application/json"[m
[31m-                    },[m
[31m-                    timeout=10.0[m
[31m-                )[m
[31m-                [m
[31m-                if response.status_code == 200:[m
[31m-                    data = response.json()[m
[31m-                    # è½¬æ¢ Aihubmix æ ¼å¼ä¸ºå‰ç«¯éœ€è¦çš„æ ¼å¼[m
[31m-                    models = [][m
[31m-                    for model in data.get("data", []):[m
[31m-                        models.append({[m
[31m-                            "id": model.get("id"),[m
[31m-                            "name": model.get("id"),  # ä½¿ç”¨ id ä½œä¸ºæ˜¾ç¤ºåç§°[m
[31m-                            "provider": "aihubmix"[m
[31m-                        })[m
[31m-                    [m
[31m-                    return {[m
[31m-                        "success": True,[m
[31m-                        "models": models,[m
[31m-                        "provider": "aihubmix",[m
[31m-                        "message": "æ¨¡å‹åˆ—è¡¨è·å–æˆåŠŸ"[m
[31m-                    }[m
[31m-                else:[m
[31m-                    print(f"Aihubmix API error: {response.status_code}")[m
[31m-                    # å¦‚æœ API è°ƒç”¨å¤±è´¥ï¼Œè¿”å›é»˜è®¤æ¨¡å‹åˆ—è¡¨[m
[31m-                    return get_default_models()[m
[31m-        else:[m
[31m-            # å¦‚æœæ²¡æœ‰ API Keyï¼Œè¿”å›é»˜è®¤æ¨¡å‹åˆ—è¡¨[m
[31m-            return get_default_models()[m
[31m-            [m
[31m-    except Exception as e:[m
[31m-        print(f"Error getting models: {e}")[m
[31m-        # å‘ç”Ÿé”™è¯¯æ—¶è¿”å›é»˜è®¤æ¨¡å‹åˆ—è¡¨[m
[31m-        return get_default_models()[m
[31m-[m
[31m-def get_default_models():[m
[31m-    """è¿”å›é»˜è®¤çš„æ¨¡å‹åˆ—è¡¨"""[m
[31m-    default_models = [[m
[31m-        {"id": "gpt-4o-mini", "name": "GPT-4o Mini", "provider": "aihubmix"},[m
[31m-        {"id": "gpt-4o", "name": "GPT-4o", "provider": "aihubmix"},[m
[31m-        {"id": "gpt-3.5-turbo", "name": "GPT-3.5 Turbo", "provider": "aihubmix"},[m
[31m-        {"id": "claude-3-haiku", "name": "Claude 3 Haiku", "provider": "aihubmix"},[m
[31m-        {"id": "claude-3-sonnet", "name": "Claude 3 Sonnet", "provider": "aihubmix"},[m
[31m-        {"id": "gemini-pro", "name": "Gemini Pro", "provider": "aihubmix"}[m
[31m-    ][m
[31m-    [m
[31m-    return {[m
[31m-        "success": True,[m
[31m-        "models": default_models,[m
[31m-        "provider": "default",[m
[31m-        "message": "ä½¿ç”¨é»˜è®¤æ¨¡å‹åˆ—è¡¨"[m
[31m-    }[m
[31m-[m
[31m-@app.post("/api/validate-key")[m
[31m-async def validate_api_key():[m
[31m-    """éªŒè¯APIå¯†é’¥çš„ç«¯ç‚¹"""[m
[31m-    return {[m
[31m-        "valid": True,[m
[31m-        "provider": "aihubmix",[m
[31m-        "model": "gpt-4o-mini",[m
[31m-        "message": "APIå¯†é’¥éªŒè¯æˆåŠŸ"[m
[31m-    }[m
[31m-[m
[31m-@app.post("/api/preprocess")[m
[31m-async def preprocess_query(request: dict):[m
[31m-    """é¢„å¤„ç†æŸ¥è¯¢çš„ç«¯ç‚¹"""[m
[31m-    try:[m
[31m-        query = request.get("query", "")[m
[31m-        language = request.get("language", "zh")[m
[31m-        [m
[31m-        processed = preprocess_mtg_query(query, language)[m
[31m-        [m
[31m-        return {[m
[31m-            "success": True,[m
[31m-            "original": query,[m
[31m-            "processed": processed,[m
[31m-            "language": language[m
[31m-        }[m
[31m-    except Exception as e:[m
[31m-        return {[m
[31m-            "success": False,[m
[31m-            "error": str(e)[m
[31m-        }[m
[31m-[m
[31m-@app.get("/api/preprocess/examples")[m
[31m-async def get_preprocess_examples():[m
[31m-    """è·å–é¢„å¤„ç†ç¤ºä¾‹"""[m
[31m-    try:[m
[31m-        examples = mtg_preprocessor.get_processed_examples()[m
[31m-        return {[m
[31m-            "success": True,[m
[31m-            "examples": examples[m
[31m-        }[m
[31m-    except Exception as e:[m
[31m-        return {[m
[31m-            "success": False,[m
[31m-            "error": str(e)[m
[31m-        }[m
[31m-[m
[31m-class AIService:[m
[31m-    def __init__(self):[m
[31m-        self.openai_api_key = os.getenv("OPENAI_API_KEY")[m
[31m-        self.aihubmix_api_key = os.getenv("AIHUBMIX_API_KEY")[m
[31m-    [m
[31m-    async def natural_language_to_scryfall(self, query: str, language: str = "zh", api_key: str = None, provider: str = "aihubmix", model: str = None) -> tuple[str, str]:[m
[31m-        """å°†è‡ªç„¶è¯­è¨€è½¬æ¢ä¸ºScryfallæŸ¥è¯¢è¯­æ³•"""[m
[31m-        [m
[31m-        # é¢„å¤„ç†ç”¨æˆ·è¾“å…¥[m
[31m-        processed_query = preprocess_mtg_query(query, language)[m
[31m-        print(f"åŸå§‹æŸ¥è¯¢: {query}")[m
[31m-        print(f"é¢„å¤„ç†å: {processed_query}")[m
[31m-        [m
[31m-        # ä¸­æ–‡æç¤ºè¯æ¨¡æ¿ - åŸºäºScryfallå®˜æ–¹è¯­æ³•å’ŒMTGä¿šè¯­[m
[31m-        zh_prompt = f"""[m
[31m-ä½ æ˜¯ä¸€ä¸ªä¸‡æ™ºç‰Œä¸“å®¶ï¼Œè¯·å°†ç”¨æˆ·çš„ä¸­æ–‡æè¿°è½¬æ¢ä¸ºScryfallæœç´¢è¯­æ³•ã€‚[m
[31m-[m
[31m-ç”¨æˆ·è¾“å…¥ï¼š{processed_query}[m
[31m-[m
[31m-è¯·è¿”å›æœ‰æ•ˆçš„Scryfallæœç´¢è¯­æ³•ï¼Œæ ¼å¼è¦æ±‚ï¼š[m
[31m-1. åªè¿”å›æœç´¢è¯­æ³•ï¼Œä¸è¦å…¶ä»–è§£é‡Š[m
[31m-2. ä½¿ç”¨æ ‡å‡†çš„Scryfallè¯­æ³•[m
[31m-[m
[31m-Scryfallå®˜æ–¹æœç´¢è¯­æ³•å‚è€ƒï¼š[m
[31m-[m
[31m-é¢œè‰²å’Œé¢œè‰²èº«ä»½ï¼š[m
[31m-- ä¼˜å…ˆä½¿ç”¨ci=è¿›è¡Œé¢œè‰²æœç´¢ï¼šci:g(ç»¿) ci:u(è“) ci:r(çº¢) ci:b(é»‘) ci:w(ç™½) ci:rg(çº¢ç»¿) ci:uw(ç™½è“)[m
[31m-- ä½¿ç”¨c=è¿›è¡Œæ³•æœ¯åŠ›é¢œè‰²æœç´¢ï¼šc=g(ç»¿è‰²æ³•æœ¯åŠ›) c=u(è“è‰²æ³•æœ¯åŠ›) c=r(çº¢è‰²æ³•æœ¯åŠ›) c=b(é»‘è‰²æ³•æœ¯åŠ›) c=w(ç™½è‰²æ³•æœ¯åŠ›)[m
[31m-- ci:colorless(æ— è‰²) ci:multicolor(å¤šè‰²)[m
[31m-- å…¬ä¼šåç§°ï¼šci:azorius(é˜¿ä½é‡Œä¹Œæ–¯) ci:simic(è¥¿ç±³å…‹) ci:rakdos(æ‹‰é“æ–¯)ç­‰[m
[31m-- ä¸‰è‰²ç»„åˆï¼šci:bant(ç­ç‰¹) ci:esper(è‰¾æ–¯æ³¢) ci:grixis(æ ¼åˆ©ææ–¯)ç­‰[m
[31m-[m
[31m-å¡ç‰Œç±»å‹ï¼š[m
[31m-- t:creature(ç”Ÿç‰©) t:instant(ç¬é—´) t:sorcery(æ³•æœ¯) t:artifact(ç¥å™¨) t:enchantment(ç»“ç•Œ) t:planeswalker(é¹æ´›å®¢) t:land(åœ°)[m
[31m-- æ”¯æŒéƒ¨åˆ†è¯åŒ¹é…ï¼št:merfolk(äººé±¼) t:goblin(åœ°ç²¾) t:legend(ä¼ å¥‡)[m
[31m-[m
[31m-å¡ç‰Œæ–‡å­—ï¼š[m
[31m-- o:"å…³é”®è¯" (æœç´¢å¡ç‰Œæ–‡å­—ä¸­çš„å…³é”®è¯)[m
[31m-- kw:flying(é£è¡Œ) kw:haste(æ•æ·) kw:first strike(å…ˆæ”»)ç­‰å…³é”®è¯èƒ½åŠ›[m
[31m-- ä½¿ç”¨å¼•å·åŒ…å›´åŒ…å«ç©ºæ ¼æˆ–æ ‡ç‚¹çš„æ–‡æœ¬[m
[31m-[m
[31m-æ³•åŠ›å€¼ï¼š[m
[31m-- mv<=3 (æ³•åŠ›å€¼å°äºç­‰äº3) mv>=5 (æ³•åŠ›å€¼å¤§äºç­‰äº5)[m
[31m-- mv:even(å¶æ•°æ³•åŠ›å€¼) mv:odd(å¥‡æ•°æ³•åŠ›å€¼)[m
[31m-- m:{{G}}{{U}} (å…·ä½“æ³•åŠ›ç¬¦å·) m:2WW (ç®€å†™æ³•åŠ›ç¬¦å·)[m
[31m-[m
[31m-åŠ›é‡/é˜²å¾¡åŠ›/å¿ è¯šåº¦ï¼š[m
[31m-- pow>=4 (åŠ›é‡å¤§äºç­‰äº4) tou<=2 (é˜²å¾¡åŠ›å°äºç­‰äº2)[m
[31m-- pt>=6 (æ€»åŠ›é‡é˜²å¾¡åŠ›å¤§äºç­‰äº6)[m
[31m-- loy=3 (èµ·å§‹å¿ è¯šåº¦ç­‰äº3)[m
[31m-[m
[31m-ç¨€æœ‰åº¦ï¼š[m
[31m-- r:common(æ™®é€š) r:uncommon(éæ™®é€š) r:rare(ç¨€æœ‰) r:mythic(ç¥è¯) r:special(ç‰¹æ®Š) r:bonus(å¥–åŠ±)[m
[31m-[m
[31m-ç‰¹æ®Šå¡ç‰‡ï¼š[m
[31m-- is:split(åˆ†ä½“å¡) is:transform(è½¬åŒ–å¡) is:meld(èåˆå¡) is:dfc(åŒé¢å¡)[m
[31m-- is:spell(å’’è¯­) is:permanent(æ°¸ä¹…ç‰©) is:vanilla(ç™½æ¿ç”Ÿç‰©) is:bear(2/2ç†Š)[m
[31m-[m
[31m-ä¸‡æ™ºç‰Œä¿šè¯­å’Œæœ¯è¯­ç†è§£ï¼š[m
[31m-[m
[31m-å¥—ç‰Œç±»å‹ï¼š[m
[31m-- aggro(å¿«æ”») â†’ ä½è´¹ç”¨ç”Ÿç‰©ï¼Œå¿«é€Ÿæ”»å‡»[m
[31m-- control(æ§åˆ¶) â†’ åå‡»å’’è¯­ï¼Œæ¸…åœºæ³•æœ¯[m
[31m-- combo(ç»„åˆæŠ€) â†’ ç‰¹æ®Šç»„åˆæ•ˆæœ[m
[31m-- midrange(ä¸­é€Ÿ) â†’ ä¸­ç­‰è´¹ç”¨ç”Ÿç‰©[m
[31m-- tempo(èŠ‚å¥) â†’ æ—¶é—´ä¼˜åŠ¿ç­–ç•¥[m
[31m-[m
[31m-ç”Ÿç‰©ç±»å‹ï¼š[m
[31m-- bear(ç†Š) â†’ 2/2ç”Ÿç‰©ï¼Œä½¿ç”¨is:bear[m
[31m-- dork(å°å…µ) â†’ 1/1æˆ–2/1ç”Ÿç‰©[m
[31m-- fatty(å¤§ç”Ÿç‰©) â†’ é«˜è´¹ç”¨å¤§ç”Ÿç‰©[m
[31m-- hate bear(ä»‡æ¨ç†Š) â†’ 2/2å…·æœ‰å¹²æ‰°èƒ½åŠ›çš„ç”Ÿç‰©[m
[31m-- vanilla(ç™½æ¿) â†’ æ— ç‰¹æ®Šèƒ½åŠ›çš„ç”Ÿç‰©ï¼Œä½¿ç”¨is:vanilla[m
[31m-[m
[31m-å…³é”®è¯èƒ½åŠ›ï¼š[m
[31m-- evasion(ç©¿é€) â†’ é£è¡Œã€ä¸å¯é˜»æŒ¡ç­‰èƒ½åŠ›[m
[31m-- removal(å»é™¤) â†’ æ¶ˆç­ã€æ”¾é€ç­‰æ•ˆæœ[m
[31m-- cantrip(å°å’’è¯­) â†’ æŠ½ä¸€å¼ ç‰Œçš„å’’è¯­[m
[31m-- wrath(æ¸…åœº) â†’ æ¶ˆç­æ‰€æœ‰ç”Ÿç‰©[m
[31m-- burn(çƒ§) â†’ ç›´æ¥ä¼¤å®³å’’è¯­[m
[31m-[m
[31m-ç‰¹æ®Šæœ¯è¯­ï¼š[m
[31m-- "dies to removal" â†’ å®¹æ˜“è¢«å»é™¤çš„ç”Ÿç‰©[m
[31m-- "bolt test" â†’ èƒ½å¦è¢«é—ªç”µå‡»æ¶ˆç­[m
[31m-- "curve" â†’ æ³•åŠ›æ›²çº¿[m
[31m-- "value" â†’ ä»·å€¼ï¼Œå¤šæ¢ä¸€æ•ˆæœ[m
[31m-- "tempo" â†’ èŠ‚å¥ä¼˜åŠ¿[m
[31m-[m
[31m-ç»„åˆæ¡ä»¶ï¼š[m
[31m-- ä½¿ç”¨ç©ºæ ¼è¿æ¥å¤šä¸ªæ¡ä»¶(ANDé€»è¾‘)[m
[31m-- ä½¿ç”¨ORè¿æ¥é€‰æ‹©æ¡ä»¶ï¼št:goblin OR t:elf[m
[31m-- ä½¿ç”¨æ‹¬å·åˆ†ç»„ï¼š(t:goblin OR t:elf) ci=r[m
[31m-- ä½¿ç”¨-å¦å®šæ¡ä»¶ï¼š-t:creature (éç”Ÿç‰©)[m
[31m-[m
[31m-ç¤ºä¾‹ï¼š[m
[31m-- "ç»¿è‰²ç”Ÿç‰©" â†’ t:creature ci=g[m
[31m-- "çº¢è‰²ç¬é—´" â†’ t:instant ci=r[m
[31m-- "åŠ›é‡å¤§äº4çš„ç”Ÿç‰©" â†’ t:creature pow>=4[m
[31m-- "ç¥è¯ç¨€æœ‰åº¦" â†’ r:mythic[m
[31m-- "è‰¾æ–¯æ³¢æ§åˆ¶" â†’ ci=esper is:spell[m
[31m-- "2/2ç†Š" â†’ is:bear[m
[31m-- "æ¸…åœºæ³•æœ¯" â†’ (o:"destroy all" OR o:"exile all") t:sorcery[m
[31m-"""[m
[31m-[m
[31m-        # è‹±æ–‡æç¤ºè¯æ¨¡æ¿ - åŸºäºScryfallå®˜æ–¹è¯­æ³•å’ŒMTGä¿šè¯­[m
[31m-        en_prompt = f"""[m
[31m-You are a Magic: The Gathering expert. Convert the user's description to Scryfall search syntax.[m
[31m-[m
[31m-User input: {processed_query}[m
[31m-[m
[31m-Return only the valid Scryfall search syntax without any explanation.[m
[31m-[m
[31m-Scryfall Official Search Syntax Reference:[m
[31m-[m
[31m-Colors and Color Identity:[m
[31m-- Prefer ci= for color searches: ci:g(green) ci:u(blue) ci:r(red) ci:b(black) ci:w(white) ci:rg(red-green) ci:uw(white-blue)[m
[31m-- Use c= for mana color searches: 